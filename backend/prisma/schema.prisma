datasource db {
  provider = "mysql"
}

model users {
  id         Int         @id @default(autoincrement())
  email      String      @unique(map: "email") @db.VarChar(255)
  password   String      @db.VarChar(255)
  role       users_role?
  created_at DateTime?   @default(now()) @db.Timestamp(0)
}

model membership_forms {
  id                 BigInt                   @id @default(autoincrement())
  uuid               String                   @unique(map: "uuid") @db.Char(36)
  email              String?                  @db.VarChar(255)
  current_step       Int?                     @default(1)
  status             membership_forms_status? @default(DRAFT)
  data               Json?
  created_at         DateTime?                @default(now()) @db.Timestamp(0)
  updated_at         DateTime?                @default(now()) @db.Timestamp(0)
  rejection_reason   String?                  @db.Text
  application_number String?                  @unique(map: "application_number") @db.VarChar(255)
}

enum users_role {
  admin
  treasurer
  secretary
}

enum membership_forms_status {
  DRAFT
  FORWARDED_TO_TREASURER
  FORWARDED_TO_SECRETARY
  TREASURER_REJECTED
  SECRETARY_REJECTED
  APPROVED
}
